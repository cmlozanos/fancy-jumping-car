<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Super Kart Racing - Carreras 3D</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸï¸</text></svg>" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- â”€â”€ TITLE / SPLASH SCREEN â”€â”€ -->
    <div id="title-screen">
      <div class="title-rainbow">ğŸ</div>
      <h1 class="title-logo">Super Kart Racing</h1>
      <p class="title-sub">Â¡Elige tu personaje y compite!</p>
      <button id="title-play" class="primary pulse">ğŸ JUGAR</button>
      <button id="title-vehicles" class="ghost">ğŸ® Elegir Personaje</button>
    </div>

    <!-- â”€â”€ CHARACTER SELECTOR â”€â”€ -->
    <div id="vehicle-menu" class="panel hidden" role="dialog" aria-label="Selector de personaje">
      <h1>ğŸ® Elige tu Personaje</h1>
      <div class="vehicle-selector-layout">
        <!-- Left: character grid -->
        <div id="vehicle-grid" class="vehicle-grid"></div>
        <!-- Right: 3D live preview -->
        <div class="vehicle-preview-panel">
          <div class="preview-header">
            <span id="preview-char-emoji" class="preview-emoji">ğŸ”´</span>
            <div class="preview-char-info">
              <div id="preview-char-name" class="preview-name">Mario</div>
              <div id="preview-char-kart" class="preview-kart">Standard Kart</div>
            </div>
          </div>
          <canvas id="vehicle-preview-canvas"></canvas>
          <div id="preview-char-desc" class="preview-desc">Selecciona un personaje para ver sus stats.</div>
          <div id="preview-stats" class="preview-stats">
            <div class="stat-row"><span>Velocidad</span><div class="stat-bar"><div id="stat-velocidad" class="stat-fill"></div></div></div>
            <div class="stat-row"><span>AceleraciÃ³n</span><div class="stat-bar"><div id="stat-aceleracion" class="stat-fill"></div></div></div>
            <div class="stat-row"><span>Manejo</span><div class="stat-bar"><div id="stat-manejo" class="stat-fill"></div></div></div>
            <div class="stat-row"><span>Peso</span><div class="stat-bar"><div id="stat-peso" class="stat-fill"></div></div></div>
          </div>
        </div>
      </div>
      <button id="vehicle-close" class="primary">âœ… Â¡Listo!</button>
    </div>

    <!-- â”€â”€ COUNTDOWN OVERLAY â”€â”€ -->
    <div id="countdown-overlay" class="hidden">
      <span id="countdown-text"></span>
    </div>

    <div id="app" class="hidden">
      <div id="game" aria-label="Juego"></div>

      <div id="ui">
        <div id="hud">
          <div class="hud-level-label" id="hud-level">Nivel 1 &mdash; Â¡Arrancamos!</div>
          <div class="hud-row">
            <div class="hud-item">Tiempo: <span id="hud-time">0.00</span>s</div>
            <div class="hud-item">Velocidad: <span id="hud-speed">0</span> km/h</div>
            <div class="hud-item">Checkpoint: <span id="hud-checkpoint">0/3</span></div>
            <div class="hud-item">&#11088; <span id="hud-collectible">No</span></div>
          </div>
          <!-- PROGRESS BAR -->
          <div id="progress-bar-container">
            <div id="progress-bar-fill"></div>
            <div id="progress-bar-car">ğŸï¸</div>
          </div>
          <div class="hud-buttons">
            <button id="open-levels" class="ghost" type="button">ğŸ† Circuitos</button>
            <button id="open-character" class="ghost" type="button">ğŸ® Personaje</button>
            <label class="color-picker" for="car-color">
              Color
              <input id="car-color" type="color" value="#ff2d2d" aria-label="Color del coche" />
            </label>
          </div>
        </div>

        <div id="controls">
          <button class="control-btn left" data-control="left" aria-label="Izquierda"></button>
          <button class="control-btn right" data-control="right" aria-label="Derecha"></button>
          <button class="control-btn action" data-control="action" aria-label="Accion"></button>
          <button class="control-btn reverse" data-control="reverse" aria-label="Reversa"></button>
        </div>

        <div id="finish" class="panel hidden">
          <h1>ğŸ Â¡Carrera completada!</h1>
          <p>Tiempo: <span id="finish-time">0.00</span>s</p>
          <button id="finish-next" class="primary">â–¶ Siguiente circuito</button>
          <button id="finish-restart" class="primary">ğŸ”„ Reiniciar</button>
          <button id="finish-character" class="ghost">ğŸ® Cambiar personaje</button>
        </div>

        <div id="level-menu" class="panel hidden" role="dialog" aria-label="Selector de circuitos">
          <h1>ğŸ† Selecciona circuito</h1>
          <div id="level-grid" class="level-grid"></div>
          <button id="level-close" class="primary">Cerrar</button>
        </div>
      </div>
    </div>

    <div id="death-flash" class="hidden"></div>

    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <script type="module" src="src/main.js?v=7"></script>
  </body>
</html>
